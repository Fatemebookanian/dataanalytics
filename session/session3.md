# مدل 2SFCA و راه‌اندازی محیط پایتون در VS Code

## معرفی مدل 2SFCA (Two-Step Floating Catchment Area)

مدل 2SFCA یکی از ابزارهای مهم در حوزه شهرسازی است که به‌ویژه در ارزیابی دسترسی به خدمات عمومی مانند خدمات بهداشتی و درمانی کاربرد دارد. این مدل به‌طور خاص برای شناسایی نابرابری‌های فضایی در دسترسی به منابع و خدمات شهری طراحی شده است. در این مدل، ابتدا دسترسی به خدمات در هر منطقه با توجه به نزدیک‌ترین منابع خدماتی (مانند بیمارستان‌ها، مدارس، فضاهای سبز، ایستگاه‌های حمل‌ونقل و ...) ارزیابی می‌شود. به عبارت دیگر، هر مکان خدماتی به جمعیت‌های اطراف خود در یک شعاع مشخص، دسترسی می‌دهد. سپس این دسترسی‌ها برای هر نقطه جمعیتی تجمیع می‌شود تا امتیاز کلی از دسترسی به خدمات برای هر ناحیه مشخص گردد.

مدل 2SFCA که ابتدا برای ارزیابی دسترسی به خدمات بهداشتی توسعه یافته بود، به‌تدریج در سایر حوزه‌ها نیز به‌کار گرفته شد و در شناسایی نابرابری‌های فضایی در زمینه‌های مختلفی همچون مراکز آموزشی، ایستگاه‌های حمل‌ونقل، و مراکز تجاری نیز مورد استفاده قرار گرفت. این مدل به متخصصان شهرسازی و برنامه‌ریزان کمک می‌کند تا مناطق کم‌دسترس یا نابرابر را شناسایی کرده و منابع را به‌طور مؤثرتر توزیع نمایند. به عنوان مثال، از طریق این مدل می‌توان مناطقی که به دلیل فاصله زیاد از بیمارستان‌ها یا مدارس به خدمات دسترسی محدودی دارند را شناسایی کرده و برنامه‌هایی برای بهبود دسترسی در این مناطق تهیه کرد.

## راه‌اندازی محیط پایتون در VS Code

### 1. نصب افزونه‌های مورد نیاز

برای استفاده از پایتون و Jupyter Notebook در VS Code، ابتدا باید افزونه‌های مربوطه را نصب کنید. پس از نصب افزونه‌ها، با استفاده از دستور زیر Jupyter Notebook را نصب کنید:

```bash
pip install notebook
این دستور یک محیط مجازی به نام `GIS` ایجاد می‌کند:

```bash
python -m venv GIS
و در لینوکس یا مک:

source GIS/bin/activate


بعد از فعال‌سازی محیط، بسته‌هایی که نصب می‌کنیم فقط در این محیط مجازی فعال خواهند بود. سپس، برای نصب Jupyter Notebook، دستور pip install notebook را وارد کرده و Jupyter Notebook را نصب می‌کنیم.

نصب کتابخانه‌های مورد نیاز

پس از نصب و راه‌اندازی Jupyter Notebook، می‌توانیم کدها را در نوت‌بوک خود بنویسیم. به‌عنوان اولین مرحله، برای استفاده از کتابخانه‌های pandas و geopandas، ابتدا باید آن‌ها را نصب کنیم. برای نصب این کتابخانه‌ها از دستور زیر استفاده می‌کنیم:

pip install pandas geopandas


کتابخانه‌های pandas و geopandas برای پردازش داده‌های جدولی و جغرافیایی به‌کار می‌روند. pandas یک کتابخانه محبوب برای تحلیل داده‌ها است که به‌ویژه برای پردازش داده‌های جدولی کاربرد دارد. این کتابخانه امکان انجام انواع عملیات مانند فیلتر کردن، گروه‌بندی، محاسبات و تجزیه و تحلیل داده‌ها را فراهم می‌آورد. در حالی که geopandas یک افزونه برای pandas است که به شما این امکان را می‌دهد تا داده‌های جغرافیایی را پردازش کنید. geopandas از فرمت‌هایی مانند Shapefile، GeoJSON و ... پشتیبانی کرده و به شما این امکان را می‌دهد تا داده‌های جغرافیایی مانند نقاط، خطوط و چندضلعی‌ها را به‌راحتی پردازش کنید.

بارگذاری داده‌های جغرافیایی به داخل GeoDataFrame

در این بخش، دو خط کد ابتدایی برای بارگذاری داده‌های جغرافیایی به داخل GeoDataFrame آورده شده است. با استفاده از متد gpd.read_file() می‌توانیم داده‌های جغرافیایی را از فایل‌های Shapefile به داخل GeoDataFrame بارگذاری کنیم:

gdf_hoods = gpd.read_file(r"data\mahallat.shp")
gdf_popblocks = gpd.read_file('data/pop/tehran_popblocks_95.shp')


در اینجا، gdf_hoods و gdf_popblocks دو متغیر هستند که داده‌های جغرافیایی مربوط به محله‌ها و بلوک‌های جمعیتی تهران را در خود نگه می‌دارند. یکی از ویژگی‌های مهم GeoDataFrame، وجود CRS (Coordinate Reference System) است که مختصات جغرافیایی داده‌ها را تعیین می‌کند. CRS به‌عنوان سیستمی برای نمایش موقعیت‌های جغرافیایی استفاده می‌شود و در هنگام بارگذاری داده‌ها به آن توجه ویژه‌ای می‌شود.

مشاهده و تغییر CRS داده‌ها

برای مشاهده CRS داده‌ها می‌توان از دستور زیر استفاده کرد:

print(gdf.crs)


در صورتی که CRS داده‌ها نیاز به تغییر داشته باشد، می‌توان با استفاده از متد to_crs() آن را تغییر داد. به‌عنوان مثال، برای تغییر CRS به EPSG:4326 (WGS 84) از دستور زیر استفاده می‌شود:

gdf = gdf.to_crs(epsg=4326)


این کار مهم است زیرا وقتی داده‌ها از CRSهای مختلف استفاده می‌کنند، ممکن است نتایج تحلیل‌ها اشتباه باشد. بنابراین، هماهنگ‌سازی CRS داده‌ها به‌منظور اطمینان از نمایش صحیح آن‌ها در نقشه یا انجام تحلیل‌های جغرافیایی ضروری است.

